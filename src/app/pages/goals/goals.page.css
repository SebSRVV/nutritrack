/* ===========================
   NutriTrack — Goals (pro)
   =========================== */

/* ---- Design tokens ---- */
:root{
  /* base dark */
  --bg:#07111f;          /* fondo */
  --bg-2:#0b1526;        /* gradiente */
  --panel:#0d192b;       /* tarjetas */
  --panel-2:#0a1424;
  --line:#21344a;        /* hairline */
  --text:#e9f2ff;
  --muted:#9fb4c9;

  /* brand (teal) + acento violeta */
  --brand:#23d1c0;
  --brand-2:#0fb19e;
  --accent:#8b7cf7;

  /* topbar */
  --topbar-1:#0a1424;
  --topbar-2:#081120;

  /* states */
  --ok:#22c55e;
  --warn:#f59e0b;
  --bad:#ef4444;

  /* metrics */
  --radius:14px;
  --radius-sm:10px;
  --gap:16px;

  /* shadow */
  --shadow:0 14px 36px rgba(0,0,0,.26);
  --shadow-soft:0 10px 26px rgba(0,0,0,.18);
}

/* optional light theme */
@media (prefers-color-scheme: light){
  :root{
    --bg:#f6f9fc; --bg-2:#eef3f8;
    --panel:#ffffff; --panel-2:#fbfdff;
    --line:#dbe5ef; --text:#0e1624; --muted:#5a6c7f;
    --brand:#1bb5a3; --brand-2:#129986;
    --topbar-1:#ffffff; --topbar-2:#f7fbff;
    --shadow:0 12px 30px rgba(15,30,60,.08);
    --shadow-soft:0 8px 22px rgba(15,30,60,.06);
  }
}

/* ---- Base ---- */
*{ box-sizing: border-box }
html,body{ height:100% }
body{
  margin:0; color:var(--text);
  font:14px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;

  /* Capa base */
  background:
    linear-gradient(180deg, var(--bg), var(--bg-2));
  background-color: var(--bg);
}

/* Overlays de fondo: textura, retícula, auroras y viñeta */
body::before,
body::after{
  content:""; position:fixed; inset:0; pointer-events:none; z-index:-1;
}

/* “grain” + retícula tenue */
body::before{
  background-image:
    repeating-linear-gradient(0deg, rgba(255,255,255,.015) 0, rgba(255,255,255,.015) 1px, transparent 1px, transparent 2px),
    repeating-linear-gradient(90deg, rgba(255,255,255,.012) 0, rgba(255,255,255,.012) 1px, transparent 1px, transparent 2px),
    linear-gradient(to right, rgba(255,255,255,.03) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255,255,255,.03) 1px, transparent 1px);
  background-size: 100% 100%, 100% 100%, 28px 28px, 28px 28px;
  mix-blend-mode:overlay;
  opacity:.55;
}

/* auroras + brillo diagonal + viñeta */
body::after{
  background:
    radial-gradient(900px 520px at 110% -10%, rgba(35,209,192,.16), transparent 60%),
    radial-gradient(800px 480px at -10% 120%, rgba(139,124,247,.12), transparent 60%),
    radial-gradient(60% 80% at 100% 0%, rgba(255,255,255,.05), transparent 60%),
    radial-gradient(50% 70% at 0% 100%, rgba(255,255,255,.035), transparent 60%),
    radial-gradient(120% 100% at 50% -10%, transparent 60%, rgba(0,0,0,.25) 100%);
  filter:saturate(110%);
  opacity:.95;
}

/* utilities */
.row{ display:flex; align-items:center; gap:8px }
.icon-16{ width:16px; height:16px }
.icon-18{ width:18px; height:18px }
.icon-20{ width:20px; height:20px }
.m0{ margin:0 }

/* ---- Topbar (glass + subrayado brand→accent; título centrado) ---- */
.topbar{
  position:sticky; top:0; z-index:10;
  display:grid; grid-template-columns: 1fr auto 1fr;
  align-items:center; gap:12px;
  padding:12px 16px;

  background: linear-gradient(
    180deg,
    color-mix(in oklab, var(--topbar-1) 92%, transparent),
    color-mix(in oklab, var(--topbar-2) 78%, transparent)
  );
  border-bottom:1px solid color-mix(in oklab, var(--line) 80%, transparent);
  backdrop-filter: blur(10px) saturate(110%);
  -webkit-backdrop-filter: blur(10px) saturate(110%);
  box-shadow:
    0 10px 30px rgba(0,0,0,.28),
    inset 0 1px 0 rgba(255,255,255,.04);
}
.topbar::after{
  content:""; position:absolute; left:0; right:0; bottom:-1px; height:2px;
  background: linear-gradient(90deg, transparent 6%,
  color-mix(in oklab, var(--brand) 72%, white 0%) 22%,
  color-mix(in oklab, var(--accent) 72%, white 0%) 78%,
  transparent 94%);
  opacity:.55;
}

.topbar-left{ justify-self:start; display:flex; align-items:center; gap:12px }
.topbar-center{ justify-self:center; text-align:center }
.topbar-right{ justify-self:end }

.topbar .title{ margin:0; font-size:20px; font-weight:800; letter-spacing:.2px }
.topbar .muted{ margin:2px 0 0; color:var(--muted); font-weight:500 }

/* Botón back */
.back{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 10px; border-radius:999px;
  border:1px solid var(--line); color:var(--muted);
  background: transparent; cursor:pointer;
}
.back:hover{ color:var(--text); border-color:#2b415a; background:#0d1626 }

/* ---- Page layout ---- */
.content{ padding:10px 0 28px }
.container{ width:min(1120px, 92vw); margin:0 auto }
.page-main{ min-height: calc(100vh - 120px) }
.scroll-area{ padding:8px 6px 24px }

/* ---- Grid (metas alineadas) ---- */
.grid{
  display:grid; gap:18px;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  align-items:stretch;
  grid-auto-rows: 1fr; /* filas de igual altura */
}
@media (max-width:760px){ .grid{ gap:14px } }

.section-title{ color:var(--muted); font-weight:600; margin:4px }
.grid .section-title{ grid-column:1 / -1 } /* ocupa toda la fila */

/* ---- Card ---- */
.card{
  background: linear-gradient(180deg, var(--panel), var(--panel-2));
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:14px;
  box-shadow:var(--shadow-soft);
  display:flex; flex-direction:column; gap:14px;
  transition: transform .16s ease, border-color .16s ease, box-shadow .16s ease, filter .16s ease;
  height:100%;
}
.card.clickable{ cursor:pointer }
.card:hover{ transform:translateY(-2px); border-color:#2f4661; box-shadow:var(--shadow); filter:brightness(1.03) }

.card-head .title-wrap{ display:flex; align-items:center; justify-content:space-between; gap:10px }
.card-head h3{ margin:0; font-size:15px; font-weight:700 }
.card-head h3.inactive{ color:#7f8fa3; text-decoration:line-through }
.desc{ margin:4px 0 0; color:var(--muted) }

/* ---- Badges ---- */
.badge{
  font-size:12px; padding:6px 8px; border-radius:999px;
  border:1px solid #2a445b; color:#a9c3d6; background:#0b1622;
}
.badge-inactive{ border-color:#4a3e69; color:#dacfff; background:#1a1630 }

/* ---- Switch ---- */
.switch{
  position:relative; display:inline-flex; align-items:center; gap:8px;
  padding:4px 8px 4px 30px;
  border-radius:999px; border:1px solid var(--line);
  background:#0d1726; color:var(--muted); font-size:12px; cursor:pointer;
}
.switch .dot{
  position:absolute; left:6px; width:16px; height:16px; border-radius:50%;
  background:#1f2f40; border:1px solid #2a3c4b;
}
.switch[aria-checked="true"]{ color:#d9fff7; border-color:#1a3f34; background:#0f1e1a }
.switch[aria-checked="true"] .dot{ background:var(--brand); border-color:var(--brand-2) }

/* ---- Progress ---- */
.progress{ display:grid; gap:8px }
.progress .bar{
  height:10px; border-radius:999px;
  background:#0a1420; border:1px solid #1d2d3f; overflow:hidden;
}
.progress .bar-fill{
  height:100%; width:0;
  background:linear-gradient(90deg, var(--brand-2), var(--brand));
  transition:width .28s cubic-bezier(.2,.8,.2,1);
}
.progress .progress-label{ display:flex; align-items:center; gap:8px; color:var(--muted) }
.progress.good .bar-fill{ background:linear-gradient(90deg, #22c55e, #79f2a5) }
.progress.warn .bar-fill{ background:linear-gradient(90deg, #f59e0b, #ffe6a3) }
.progress.bad  .bar-fill{ background:linear-gradient(90deg, #ef4444, #ff91a6) }

/* ---- Week ticks ---- */
.week{ display:grid; grid-template-columns:repeat(7, 1fr); gap:10px; padding-top:2px }
.day{ text-align:center }
.day-label{ color:var(--muted); font-size:12px; margin-bottom:6px; text-transform:lowercase }
.tick{
  width:28px; height:28px; margin:0 auto;
  display:grid; place-items:center;
  border-radius:50%; border:1px solid #263a4e;
  background:#0b1420; cursor:pointer;
  transition: transform .12s ease, border-color .12s ease, background .12s ease;
}
.tick:hover{ transform:translateY(-1px); border-color:#385779 }
.tick[disabled]{ opacity:.6; cursor:not-allowed }
.tick .dot{ width:9px; height:9px; border-radius:50%; background:#213240 }
.tick.on{ background:#0f1e19; border-color:#1e4b3c }
.tick.on .dot{ background:var(--brand) }

/* ---- Buttons ---- */
.btn{
  display:inline-flex; align-items:center; gap:6px; cursor:pointer;
  padding:8px 10px; border-radius:10px;
  color:var(--text); background:#0d1726; border:1px solid var(--line);
}
.btn:hover{ background:#0c1522; border-color:#2a3c4b }
.btn.ghost{ color:var(--muted) }
.btn.primary{ background:linear-gradient(180deg, #183a31, #0e2a24); border-color:#1f4b3e }
.btn.primary:hover{ background:#143429 }

/* ---- Empty ---- */
.empty{ text-align:center; padding:40px 0 60px; color:var(--muted) }
.empty img{ width:160px; opacity:.9; display:block; margin:10px auto 6px }

/* ---- Modal ---- */
.sheet-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.55); backdrop-filter:blur(2px) }
.dialog{
  position:fixed; inset:50% auto auto 50%; transform:translate(-50%, -50%);
  width:min(720px, 94vw);
  background:linear-gradient(180deg, var(--panel), var(--panel-2));
  border:1px solid var(--line); border-radius:16px;
  box-shadow:var(--shadow); display:flex; flex-direction:column;
}
.dialog-header{ display:flex; justify-content:space-between; align-items:center; padding:14px 16px; border-bottom:1px solid var(--line) }
.dialog-body{ display:grid; gap:14px; padding:16px }
.dialog-footer{ display:flex; gap:10px; justify-content:flex-end; padding:12px 16px; border-top:1px solid var(--line) }

/* Campos */
.field{ display:grid; gap:6px }
.field span{ font-size:13px; color:var(--muted) }
.field small{ color:var(--muted) }
input[type="text"], input[type="number"], textarea{
  width:100%; color:var(--text);
  background:#0c1520; border:1px solid #213244;
  border-radius:10px; padding:10px 12px; outline:none;
}
input:focus-visible, textarea:focus-visible{
  border-color:#324f6a; box-shadow:0 0 0 3px rgba(35,209,192,.18)
}
textarea{ resize:vertical }

/* 2 cols cuando hay espacio */
@media (min-width:900px){
  .dialog-body{ grid-template-columns:1fr 1fr }
  .dialog-body .field:nth-child(1),
  .dialog-body .field:nth-child(2){ grid-column:1 / -1 }
}

/* ---- Loading ---- */
.loading{ color:var(--muted); padding:24px }

/* ---- Motion / a11y ---- */
:focus-visible{
  outline:none;
  box-shadow:0 0 0 3px rgba(35,209,192,.25) inset,
  0 0 0 3px rgba(35,209,192,.15)
}
@media (prefers-reduced-motion: reduce){
  *{ animation:none !important; transition:none !important }
}
